# Shokunin Plymouth Theme - Minimal centered password input
# Gruvbox dark theme colors - completely silent boot

# Screen setup
screen_width = Window.GetWidth();
screen_height = Window.GetHeight();

# Gruvbox dark background
Window.SetBackgroundTopColor(0.16, 0.16, 0.16);     # #282828
Window.SetBackgroundBottomColor(0.16, 0.16, 0.16);  # #282828

# Password prompt sprites
prompt_sprite = NULL;
bullet_sprite = NULL;

fun DisplayPasswordPrompt(prompt, bullets) {
    # Clear previous sprites
    if (prompt_sprite) prompt_sprite.SetOpacity(0);
    if (bullet_sprite) bullet_sprite.SetOpacity(0);

    # Show prompt text centered
    prompt_image = Image.Text(prompt, 0.92, 0.86, 0.70);  # Gruvbox fg #ebdbb2
    prompt_sprite = Sprite(prompt_image);
    prompt_sprite.SetX(screen_width / 2 - prompt_image.GetWidth() / 2);
    prompt_sprite.SetY(screen_height / 2 - 50);
    prompt_sprite.SetZ(10000);

    # Show password bullets centered
    if (bullets > 0) {
        bullet_string = "";
        for (i = 0; i < bullets; i++) {
            bullet_string += "â—";
        }
        bullet_image = Image.Text(bullet_string, 0.92, 0.86, 0.70, 1, "Sans 24");
        bullet_sprite = Sprite(bullet_image);
        bullet_sprite.SetX(screen_width / 2 - bullet_image.GetWidth() / 2);
        bullet_sprite.SetY(screen_height / 2);
        bullet_sprite.SetZ(10000);
    }
}

Plymouth.SetDisplayPasswordFunction(DisplayPasswordPrompt);

# Hide all boot messages - return nothing to suppress
fun HideMessage(text) {
}
Plymouth.SetMessageFunction(HideMessage);

# Hide boot progress/status
fun HideProgress(duration, progress) {
}
Plymouth.SetBootProgressFunction(HideProgress);

# Hide update status
fun HideUpdate(status) {
}
Plymouth.SetUpdateStatusFunction(HideUpdate);

# Hide question prompts (only show password)
fun HideQuestion(prompt, entry) {
    return "";
}
Plymouth.SetDisplayQuestionFunction(HideQuestion);

# Refresh callback - do nothing
fun Refresh() {
}
Plymouth.SetRefreshFunction(Refresh);
