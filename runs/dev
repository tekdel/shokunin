#!/bin/bash
# runs/dev - Development tools and languages

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
DOTFILES_DIR="$SCRIPT_DIR/../dotfiles"

# Build tools
sudo pacman -S --needed --noconfirm \
    cmake \
    make \
    gcc \
    clang \
    llvm

# Development utilities
sudo pacman -S --needed --noconfirm \
    shellcheck \
    shfmt \
    mise \
    go \
    rust \
    rustup

# Copy mise config before installing tools
if [ -f "$DOTFILES_DIR/.mise.toml" ]; then
    cp "$DOTFILES_DIR/.mise.toml" ~/
    mise trust ~/.mise.toml 2>/dev/null || true
    echo "âœ“ .mise.toml copied and trusted"
fi

# Install languages via mise (Node.js, Python)
echo "Installing Node.js and Python via mise..."
mise install -y

echo "Development tools installed successfully!"
echo "Node.js and Python managed by mise"
