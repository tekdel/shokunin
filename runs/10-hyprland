#!/bin/bash
# runs/hyprland - Hyprland window manager and ecosystem

# Core Hyprland packages
sudo pacman -S --needed --noconfirm \
    hyprland \
    hyprlock \
    hypridle \
    hyprpaper \
    waybar \
    xdg-desktop-portal-hyprland \
    xdg-desktop-portal-gtk \
    qt5-wayland \
    qt6-wayland \
    polkit-gnome

# Notifications and utilities
sudo pacman -S --needed --noconfirm \
    mako \
    grim \
    slurp \
    satty \
    wl-clipboard \
    cliphist \
    brightnessctl \
    playerctl \
    pamixer \
    socat \
    kanshi

# Application launcher (Walker - same as Omarchy)
paru -S --needed --noconfirm --skipreview \
    walker-bin \
    elephant-desktopapplications \
    elephant-runner \
    swayosd-git

# Wallpaper and theming
sudo pacman -S --needed --noconfirm \
    swaybg \
    waypaper \
    adwaita-cursors

# Display manager (graphical login)
sudo pacman -S --needed --noconfirm \
    sddm

# Install minimal SDDM theme
paru -S --needed --noconfirm --skipreview \
    where-is-my-sddm-theme-git

# Configure SDDM to use minimal theme
echo "Configuring SDDM theme..."
sudo mkdir -p /etc/sddm.conf.d
cat <<EOF | sudo tee /etc/sddm.conf.d/theme.conf
[Theme]
Current=where_is_my_sddm_theme
EOF

# Enable SDDM for graphical login
sudo systemctl enable sddm || echo "Note: systemctl enable may fail in chroot - sddm will be enabled on first boot"

echo "Hyprland installed successfully!"
echo "Note: SDDM display manager with minimal theme enabled"
