#!/bin/bash
# Monitor switch script - simple and reliable

LAPTOP="eDP-1"

# Force laptop on (recovery mode)
if [[ "$1" == "-l" ]]; then
    hyprctl keyword monitor "$LAPTOP,1920x1200,0x0,1"
    exit 0
fi

# Check if external monitor is connected
if hyprctl monitors all | grep -q "LG UltraFine"; then
    # External connected
    hyprctl keyword monitor "desc:LG Electronics LG UltraFine 901NTDV6P994,3840x2160,0x0,1"
    hyprctl keyword monitor "$LAPTOP,disable"
    notify-send -t 3000 "Monitor" "External"
else
    # Laptop only
    hyprctl keyword monitor "$LAPTOP,1920x1200,0x0,1"
    notify-send -t 3000 "Monitor" "Laptop"
fi
