#!/bin/bash
# Resume display after sleep/hibernate
# Ensures at least one monitor is enabled

LAPTOP="eDP-1"

# Wait a moment for hardware to initialize
sleep 1

# Turn on DPMS
hyprctl dispatch dpms on

# Check if any monitor is active
ACTIVE_MONITORS=$(hyprctl monitors -j | jq 'length')

if [ "$ACTIVE_MONITORS" -eq 0 ]; then
    # No monitors - force laptop on as emergency fallback
    hyprctl keyword monitor "$LAPTOP,preferred,auto,1"
    sleep 1
fi

# Run monitor-switch to configure the correct setup
~/.local/bin/monitor-switch
